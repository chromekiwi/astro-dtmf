---
import { Image } from 'astro:assets';
import background from '../assets/background.webp';
---

<div id="container">
  <Image
    src={background}
    alt="'DeBÍ TiRAR MáS FOToS' album cover blurred background"
    class="background"
    loading="eager"
    decoding="async"
  />

  <main>
    <div class="ticket">
      <h1>DeBÍ TiRAR MáS FOtoS</h1>
      <h2>Fri 12 Dec 2025, 9:00p.m. Estadio GNP Seguros</h2>
      <section>
        <article>
          <h3>SEC</h3>
          <h4>NA-14</h4>
        </article>
        <article>
          <h3>ROW</h3>
          <h4>24</h4>
        </article>
        <article>
          <h3>SEAT</h3>
          <h4>4</h4>
        </article>
      </section>
    </div>

    <div class="spotify-embed">
      <iframe
        src="https://open.spotify.com/embed/album/5K79FLRUCSysQnVESLcTdb?utm_source=generator&theme=0"
        loading="lazy"
        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
      ></iframe>
    </div>
  </main>
</div>

<style>
  #container {
    position: fixed; /* fills the viewport and stays put */
    inset: 0;
    display: flex;
    justify-content: center; /* mobile-first: start content near top */
    align-items: center;
    overflow-y: auto; /* mobile-first: allow scrolling */
    font-family:
      system-ui,
      -apple-system,
      BlinkMacSystemFont,
      'Segoe UI',
      Roboto,
      Oxygen,
      Ubuntu,
      Cantarell,
      'Open Sans',
      'Helvetica Neue',
      sans-serif;
  }

  /* Oversized, blurred album art in the background */
  .background {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 120vw;
    height: 110vh;
    transform: translate(-50%, -50%) scale(1.5);
    object-fit: cover;
    filter: blur(15px);
    z-index: -1; /* behind everything */
    pointer-events: none;
  }

  /* Foreground flex wrapper - mobile-first styles */
  main {
    position: relative; /* keeps z-index context */
    z-index: 1;
    display: flex;
    flex-direction: column; /* mobile-first: stack vertically */
    gap: 2rem;
    max-width: 90vw;
    max-height: none; /* mobile-first: no height restriction */
    color: #fff;
    text-align: center;
    flex-wrap: nowrap;
    container-type: inline-size; /* enables container queries if desired */
    justify-content: flex-start; /* mobile-first: align to top */
    align-items: center;
    margin-top: 16rem; /* mobile-first: breathing room top & bottom */
  }

  /* Use side-by-side layout for larger screens */
  @media (min-width: 481px) and (min-height: 701px) {
    #container {
      justify-content: center;
      overflow: hidden; /* prevent scrolling on larger screens */
    }

    main {
      flex-direction: row; /* side-by-side layout */
      max-height: 70vh;
      justify-content: center;
      margin-block: 2rem; /* remove top/bottom margin */
    }
  }

  /* Mobile-first ticket styles */
  .ticket {
    height: auto; /* mobile-first: flexible height */
    width: 70vw;
    max-width: 320px;
    padding: 1.25rem;
    background: rgb(0 0 0 / 0.8);
    border-radius: 12px;
    box-shadow: 0 4px 20px rgb(0 0 0 / 0.5);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }

  .ticket h1 {
    font-size: 2rem;
    margin-bottom: 0.5rem;
  }

  .ticket section {
    display: flex;
    gap: 2rem;
    justify-content: center;
  }

  .ticket h2 {
    color: #d4d4d4;
    font-weight: normal;
    font-size: 16px;
    font-family: Verdana, Geneva, Tahoma, sans-serif;
  }

  .ticket h3 {
    font-size: 1rem;
    font-family: Verdana, Geneva, Tahoma, sans-serif;
    font-weight: lighter;
    margin-bottom: 0.25rem; /* reduce bottom margin */
  }

  .ticket h4 {
    font-size: 1.25rem;
    font-weight: bold;
    margin-top: 0; /* remove top margin */
  }

  .ticket article {
    margin: 0; /* ensure no extra margin on articles */
  }

  /* Mobile-first Spotify embed styles */
  .spotify-embed {
    height: auto;
    width: 80vw;
    flex-shrink: 0;
  }

  .spotify-embed iframe {
    width: 100%;
    aspect-ratio: 16 / 9;
    height: 60vh;
    border: none;
  }

  /* Larger screen adaptations */
  @media (min-width: 481px) {
    .ticket {
      height: 41.5vh;
      width: clamp(280px, 30vw, 340px);
      padding: clamp(1.5rem, 4vw, 2rem);
    }

    .ticket h1 {
      font-size: xx-large; /* reset to default font size */
    }

    .spotify-embed {
      width: clamp(325px, 50vw, 380px);
    }

    .spotify-embed iframe {
      height: 50vh;
      aspect-ratio: initial; /* let height take precedence */
    }
  }
</style>
